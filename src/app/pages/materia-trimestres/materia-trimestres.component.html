<app-navbar></app-navbar>

<div class="min-h-screen bg-gray-50 py-10 px-10" *ngIf="!cargando && data">
    <h2 class="text-2xl font-bold text-indigo-700 text-center mb-10">
        {{ data.materia }} â€” {{ data.curso }}
    </h2>

    <div class="grid gap-8" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
        <div *ngFor="let key of ['trimestre_1', 'trimestre_2', 'trimestre_3']"
            class="border border-gray-200 rounded-2xl p-8 shadow-md hover:shadow-lg transition-all bg-white">
            <!-- TÃ­tulo del trimestre -->
            <h3 class="text-xl font-semibold text-gray-800 text-center mb-4">
                {{ key.replace('_', ' ').toUpperCase() }}
            </h3>

            <!-- Si existe -->
            <ng-container *ngIf="data.trimestres[key].existe; else noCreado">
                <!-- Estado visual -->
                <div class="text-center py-2 px-4 rounded-xl font-medium mb-3" [ngClass]="{
            'bg-green-100 text-green-700': data.trimestres[key].estado === 'cerrado',
            'bg-yellow-100 text-yellow-700': data.trimestres[key].estado === 'abierto'
          }">
                    Estado: {{ data.trimestres[key].estado | titlecase }}
                </div>

                <!-- Mensaje principal -->
                <p class="text-center" [ngClass]="{
            'text-green-600 font-medium': data.trimestres[key].estado === 'cerrado',
            'text-yellow-600 font-medium': data.trimestres[key].estado === 'abierto'
          }">
                    {{ data.trimestres[key].mensaje }}
                </p>

                <!-- Info adicional -->
                <p class="text-sm text-gray-600 text-center mt-2">
                    {{ data.trimestres[key].cantidad }} registros encontrados.
                </p>
            </ng-container>

            <!-- Si no existe -->
            <ng-template #noCreado>
                <p class="text-red-500 text-center italic">
                    {{ data.trimestres[key].mensaje }}
                </p>
            </ng-template>
        </div>
    </div>
</div>

<!-- Estados de carga o error -->
<div *ngIf="cargando" class="text-center text-gray-600 mt-20">
    Cargando trimestres...
</div>

<div *ngIf="error" class="text-center text-red-600 mt-20">
    {{ error }}
</div>